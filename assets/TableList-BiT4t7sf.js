const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BpaSa1sZ.js","assets/index-BQFDlsbq.js","assets/index-B9tlkxep.js","assets/vendor-0HVaVRtn.js","assets/index-CDFczaSZ.css","assets/guid-ejniuQmw.js","assets/useT9n-BAdim2uk.js","assets/index-BaR0eA3R.js","assets/dom-DXCz8xBx.js","assets/observers-DKHtQCdG.js","assets/ref-mlU-jjBY.js","assets/static-CMwp5dJV.js","assets/form-DGhBVSDx.js","assets/interactive-D6NUw5NR.js","assets/label-CzGPa8dZ.js","assets/loadable-CMZ6Ewxo.js","assets/component-RivLF-lo.js","assets/index-BRquYRRa.js","assets/index-CrcYoORr.js","assets/index-_i1FxD6n.js","assets/keyed-DPCpVkrQ.js","assets/index-WD_95nGZ.js","assets/floating-ui-B2cpMeag.js","assets/debounce-D0G5qrda.js","assets/openCloseComponent-CXDVdkK_.js","assets/FloatingArrow-CqdEhK-J.js","assets/useFocusTrap-CjbDN4tw.js","assets/key-CZcQa38B.js","assets/index-QO4HvK9K.js","assets/array-BbE1dLa5.js","assets/customElement-Q_CSMwm6.js","assets/index-BDCLCunr.js","assets/index-Dul6E-3m.js","assets/index-CJ0lqai7.js","assets/customElement-CLwG9syH.js","assets/index-Bomb-SyA.js","assets/utils-t7Rkr4j6.js","assets/index-BNoaj08z.js"])))=>i.map(i=>d[i]);
import{f2 as U,kO as j,kU as h,mq as V,a0 as i,a1 as s,a2 as L,dv as X,a6 as C,cK as b,cL as w,mr as G,ms as ie,G as se,kN as R,mt as le,mu as oe,mv as ne,mw as ae,eS as re,dS as de,mx as he,kP as ce,my as W,cG as pe,kR as ue,kS as me,kT as ye,_ as E,kV as D,kW as z,kX as be,kY as _e,kZ as q,k_ as ge}from"./index-B9tlkxep.js";import"./vendor-0HVaVRtn.js";const I="esri-table-list",v=`${I}__item`,T={base:I,actionMenu:`${I}__action-menu`,actionGroup:`${I}__action-group`,filterNoResults:`${I}__filter-no-results`,item:v,itemContentBottom:`${v}-content-bottom`,itemMessage:`${v}-message`,itemActionIcon:`${v}-action-icon`,itemActionImage:`${v}-action-image`,itemTemporaryIcon:`${v}-temporary-icon`,publishing:`${I}__publishing`,statusIndicator:`${I}__status-indicator`};let p=class extends U.IdentifiableMixin(j){constructor(t,l){super(t,l),this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}get disabled(){return!(this.content&&this.listItem)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,l=this._getFirstWidget();return this._get("icon")??(!t&&l?l.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(t){this._override("title",t)}render(){return h("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{disabled:l,open:o}=this;return t&&!l&&o?typeof t=="string"?h("div",{innerHTML:t,key:t}):V(t)?h("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?h("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:l}=this;return l?Array.isArray(t)?t.map(o=>this._renderContent(o)):this._renderContent(t):null}_attachToNode(t){t.appendChild(this)}_getWidget(t){return V(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(l=>this._getWidget(l)).find(l=>l):this._getWidget(t)}};i([s()],p.prototype,"className",void 0),i([s()],p.prototype,"content",void 0),i([s()],p.prototype,"disabled",null),i([s()],p.prototype,"flowEnabled",void 0),i([s()],p.prototype,"icon",null),i([s()],p.prototype,"image",void 0),i([s()],p.prototype,"listItem",void 0),i([s()],p.prototype,"open",void 0),i([s()],p.prototype,"title",null),i([s()],p.prototype,"visible",void 0),p=i([L("esri.widgets.TableList.ListItemPanel")],p);const Y=p;var M;const x="layer",k="child-list-mode",fe="hide",Ie=C.ofType({key:"type",defaultKeyValue:"button",base:ae,typeMap:{button:ne,toggle:oe}}),Z=C.ofType(Ie);let r=M=class extends U.IdentifiableMixin(X){constructor(e){super(e),this.actionsSections=new Z,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(C.ofType(M)),this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0}initialize(){if(this.addHandles([b(()=>[this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),w),b(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),w),b(()=>this.panel,e=>this._setListItemOnPanel(e),w)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll()}get error(){return this.layer?.loadError}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Y(e):null}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return(t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing")??!1}get title(){const e=G(this,"layer.layer");return(!e||e&&G(this,"layer.layer.loaded")?this.layer?.title:null)??""}set title(e){this._overrideIfSome("title",e)}clone(){return new M({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title})}_updateChildrenPublishing(e){this.children?.forEach(t=>t.checkPublishStatusEnabled=e)}_setListItemOnPanel(e){e&&(e.listItem=this)}_createChildItems(e,t){return e.reverse().map(l=>t||ie(l)?new M({layer:l,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this}):null).filter(se)}_createChildren(e){const{listModeDisabled:t,children:l}=this,o=e.reverse().filter(a=>!l.some(d=>d.layer===a));l.addMany(this._createChildItems(o,t))}_destroyChildren(e){const{children:t}=this,l=t.filter(o=>!!o.layer&&!e.includes(o.layer));t.destroyMany(l)}_sortChildren(e){this.children.sort((t,l)=>e.indexOf(l.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(k),this.children.destroyAll()}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter(l=>R(l)!==fe);e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchChildLayerListMode(e){this.removeHandles(k),this.listModeDisabled||this.addHandles(e.toArray().map(t=>b(()=>t.listMode,()=>this._compileChildren(e))),k)}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),x)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_watchLayerProperties(e){if(this.removeHandles(x),this.removeHandles(k),!e)return;if(e.load(),(!this.listModeDisabled&&R(e))==="hide-children")return void this.children.destroyAll();const t=le(e);t&&this.addHandles(b(()=>e[t],l=>{e.hasOwnProperty(t)&&this._initializeChildLayers(l)},w),x)}};i([s({type:Z})],r.prototype,"actionsSections",void 0),i([s()],r.prototype,"actionsOpen",void 0),i([s()],r.prototype,"checkPublishStatusEnabled",void 0),i([s({type:C.ofType(r)})],r.prototype,"children",void 0),i([s({readOnly:!0})],r.prototype,"error",null),i([s()],r.prototype,"hidden",void 0),i([s()],r.prototype,"layer",void 0),i([s()],r.prototype,"listItemCreatedFunction",void 0),i([s({nonNullable:!0})],r.prototype,"listModeDisabled",void 0),i([s()],r.prototype,"open",void 0),i([s({type:Y})],r.prototype,"panel",void 0),i([re("panel")],r.prototype,"castPanel",null),i([s()],r.prototype,"parent",void 0),i([s({readOnly:!0})],r.prototype,"publishing",null),i([s()],r.prototype,"sortable",void 0),i([s()],r.prototype,"title",null),r=M=i([L("esri.widgets.TableList.ListItem")],r);const H=r,B={map:"map",layerListMode:"layer-list-mode"},ve="hide",J=C.ofType(H);let u=class extends de.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.tableItems=new J,this.map=null}initialize(){this.addHandles([b(()=>[this.tables,this.map?.allTables.toArray()],()=>this._compileList(),w),b(()=>[this.map?.loaded,this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList())],B.map)}destroy(){this._removeAllItems(),this.map=null,this.tables=null}get tables(){return this.map?.allTables}set tables(e){this._overrideIfSome("tables",e)}get state(){const{map:e,tables:t}=this;if(!e)return t?"ready":"disabled";const l=e?.loadStatus;return typeof l=="string"?l==="loaded"?"ready":l==="loading"?"loading":"disabled":"ready"}get totalItems(){return this.tableItems.length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}_removeAllItems(){this.tableItems.destroyAll()}_getViewableTables(e){return e?this.listModeDisabled?e:e.filter(t=>R(t)!==ve):void 0}_watchTablesListMode(e){this.removeHandles(B.layerListMode),e&&!this.listModeDisabled&&this.addHandles(b(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),B.layerListMode)}_compileList(){const{tables:e}=this;this._watchTablesListMode(e);const t=this._getViewableTables(e);t?.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{tableItems:t,listItemCreatedFunction:l,checkPublishStatusEnabled:o}=this;e.forEach(a=>{t.some(d=>d.layer===a)||t.add(new H({checkPublishStatusEnabled:o,layer:a,listItemCreatedFunction:l}))})}_removeItems(e){const{tableItems:t}=this;t.forEach(l=>{if(!l)return;e?.find(a=>l.layer===a)||(t.remove(l),l.destroy())})}_sortItems(e){const{tableItems:t}=this;t.sort((l,o)=>{const a=e.indexOf(l.layer),d=e.indexOf(o.layer);return a>d?-1:a<d?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}};i([s()],u.prototype,"checkPublishStatusEnabled",void 0),i([s()],u.prototype,"listItemCreatedFunction",void 0),i([s({nonNullable:!0})],u.prototype,"listModeDisabled",void 0),i([s({type:J,readOnly:!0})],u.prototype,"tableItems",void 0),i([s()],u.prototype,"tables",null),i([s()],u.prototype,"map",void 0),i([s({readOnly:!0})],u.prototype,"state",null),i([s()],u.prototype,"totalItems",null),u=i([L("esri.widgets.TableList.TableListViewModel")],u);const Q=u;let m=class extends X{constructor(){super(...arguments),this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryTableIndicators=!1}};i([s({type:Boolean,nonNullable:!0})],m.prototype,"closeButton",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"collapseButton",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"errors",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"filter",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"flow",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"heading",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"statusIndicators",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"temporaryTableIndicators",void 0),m=i([L("esri.widgets.TableList.TableListVisibleElements")],m);const ee=m;function A(e){return e["data-item"]}function we(e,t){e?.sort((l,o)=>{const a=t.indexOf(l.uid),d=t.indexOf(o.uid);return a>d?-1:a<d?1:0})}const K="nested",te=C.ofType(H);let n=class extends U.IdentifiableMixin(j){constructor(e,t){super(e,t),this._rootListEl=null,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`table-${this.uid}`,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=he,this.minFilterItems=ce,this.selectedItems=new te,this.selectionMode="none",this.viewModel=new Q,this.visibleElements=new ee,this._canMove=({dragEl:l,fromEl:o,toEl:a},d)=>{const _=d==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,g=A(l);if(!g?.sortable)return!1;const f=A(o),y=W(o),S=A(a),P=W(a),F=!!y&&!!P&&y===P,O={selected:g,from:f,to:S},N=o.group,$=a.group;return N&&$&&typeof _=="function"?_.call(null,O):F},this._onCalciteListOrderChange=l=>{const{_lastDragDetail:o}=this,{toEl:a,fromEl:d,dragEl:_,newIndex:g}=l;if(!d||!a||o?.newIndex===g&&o?.dragEl===_&&o?.toEl===a&&o?.fromEl===d)return;this._lastDragDetail=l,this._selectedDragItemLayerUid=_.value;const f=Array.from(d.children).filter(y=>y?.matches("calcite-list-item")).map(y=>y.value);we(this.map?.tables,f)},this._onSelectedDragItemLayerUidChange=l=>{this._selectedDragItemLayerUid=l},this._onTriggerAction=(l,o)=>{this.triggerAction(l,o)},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0}}initialize(){this.addHandles([pe(()=>this.viewModel.tableItems,"change",()=>ue(this.selectedItems),w),b(()=>[this.filterPredicate,this._rootListEl],()=>me(this._rootListEl,this.filterPredicate))])}loadDependencies(){return ye({button:()=>E(()=>import("./index-BpaSa1sZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])),flow:()=>E(()=>import("./index-BRquYRRa.js"),__vite__mapDeps([17,2,3,4,10,9,15,8,5])),"flow-item":()=>E(()=>import("./index-CrcYoORr.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,19,20,10,13,15,16,21,22,23,24,11,25,26,27,28,29,30,31])),list:()=>E(()=>import("./index-Dul6E-3m.js"),__vite__mapDeps([32,1,2,3,4,5,6,30,10,9,8,20,7,33,34,35,11,12,13,27,14,15,16,23,36])),notice:()=>E(()=>import("./index-BNoaj08z.js"),__vite__mapDeps([37,7,2,3,4,8,5,9,10,15,24,16,6]))})}get _dragEnabled(){return this.viewModel.totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this.viewModel.totalItems>=this.minFilterItems&&this.visibleElements.filter}get _visibleItems(){return this.tableItems?.filter(e=>!e.hidden&&(this.visibleElements.errors||!e.error))}get _openedPanelItems(){return this._visibleItems.filter(({hidden:e,panel:t})=>!e&&t?.open&&!t.disabled&&t.flowEnabled)}get icon(){return"table"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get tableItems(){return this.viewModel.tableItems}get tables(){return this.viewModel.tables}set tables(e){this.viewModel.tables=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const e=this.viewModel?.state,{_visibleItems:t}=this,l={[D.hidden]:e==="loading",[D.disabled]:e==="disabled"};return h("div",{class:this.classes(T.base,D.widget,D.panel,l)},t?.length?this._renderItems():this._renderNoItems())}_renderNoItemsMessage(){return h("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return h("div",{class:T.itemMessage,key:"esri-layer-list__no-items"},h("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}_renderPanelFlowItems(){const{_openedPanelItems:e}=this;return e.toArray().map(({title:t,panel:l},o)=>{const a=()=>this._handlePanelFlowItemBack(l);return h("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:t,heading:l.title,headingLevel:this.headingLevel,key:`flow-panel-${l.uid}`,selected:o===e.length-1,onCalciteFlowItemBack:d=>{d.preventDefault(),a()}},l.render(),h("calcite-button",{appearance:"transparent",onclick:a,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,z(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,z(e))}_renderItems(){const{visible:e,collapsed:t,visibleElements:{closeButton:l,collapseButton:o,heading:a,flow:d},_dragEnabled:_,_visibleItems:g,_filterEnabled:f,_rootGroupUid:y,_openedPanelItems:S,selectionMode:P,messages:F,filterPlaceholder:O,filterText:N}=this,$=[h("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:l,closed:!e,collapsed:t,collapsible:o,heading:a?F.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!S.length,onCalciteFlowItemClose:()=>this.visible=!1},h("calcite-list",{afterCreate:c=>{this._rootListEl=c},afterRemoved:()=>{this._rootListEl=null},canPull:c=>this._canMove(c,"pull"),canPut:c=>this._canMove(c,"put"),"data-layer-type":y,displayMode:K,dragEnabled:_,filterEnabled:f,filterPlaceholder:O,filterProps:be,filterText:f?N:"",group:y,key:"root-list",label:F.widgetLabel,selectionAppearance:"border",selectionMode:P,onCalciteListChange:c=>this._handleCalciteListChange(c),onCalciteListDragEnd:c=>this._handleCalciteListDragEnd(c.detail),onCalciteListFilter:c=>this.filterText=c.currentTarget?.filterText??"",onCalciteListOrderChange:c=>this._onCalciteListOrderChange(c.detail)},g?.toArray().map(c=>this._renderItem(c)),g?.length&&f?h("div",{class:T.filterNoResults,slot:"filter-no-results"},h("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems()];return e?d?h("calcite-flow",{key:"root-flow"},$):$:null}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:l,oldIndex:o}=e;t.insertBefore(l,t.children[o])}_renderItem(e){return h(_e,{canMove:this._canMove,css:T,displayMode:K,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer.uid}`,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange})}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:l}=this;if(t==="none")return;const o=e.target.selectedItems.map(a=>A(a)).filter(Boolean);l.removeAll(),l.addMany(o)}};i([s()],n.prototype,"_rootListEl",void 0),i([s()],n.prototype,"_focusRootFlowItem",void 0),i([s()],n.prototype,"_focusPanelFlowItem",void 0),i([s()],n.prototype,"_dragEnabled",null),i([s()],n.prototype,"_filterEnabled",null),i([s()],n.prototype,"_visibleItems",null),i([s()],n.prototype,"_openedPanelItems",null),i([s()],n.prototype,"collapsed",void 0),i([s()],n.prototype,"dragEnabled",void 0),i([s()],n.prototype,"filterPlaceholder",void 0),i([s()],n.prototype,"filterPredicate",void 0),i([s()],n.prototype,"filterText",void 0),i([s()],n.prototype,"headingLevel",void 0),i([s()],n.prototype,"icon",null),i([s()],n.prototype,"label",null),i([s()],n.prototype,"listItemCanGiveFunction",void 0),i([s()],n.prototype,"listItemCanReceiveFunction",void 0),i([s()],n.prototype,"listItemCreatedFunction",null),i([s()],n.prototype,"map",null),i([s(),q("esri/widgets/TableList/t9n/TableList")],n.prototype,"messages",void 0),i([s(),q("esri/t9n/common")],n.prototype,"messagesCommon",void 0),i([s()],n.prototype,"minDragEnabledItems",void 0),i([s()],n.prototype,"minFilterItems",void 0),i([s({type:te})],n.prototype,"selectedItems",void 0),i([s()],n.prototype,"selectionMode",void 0),i([s({readOnly:!0})],n.prototype,"tableItems",null),i([s()],n.prototype,"tables",null),i([ge("trigger-action"),s({type:Q})],n.prototype,"viewModel",void 0),i([s({type:ee,nonNullable:!0})],n.prototype,"visibleElements",void 0),n=i([L("esri.widgets.TableList")],n);const Le=n;export{Le as default};
