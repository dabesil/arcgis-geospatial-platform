import{aS as c,kC as y,kD as d,kE as m,kF as p,kG as b,A as g,P as _,kH as h,s as w,bj as A,bT as u,gS as S}from"./index-B9tlkxep.js";import{i as B,o as I}from"./Indices-ByIf1rnY.js";function R(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,o=2,n=o){const a=t.length/2;let r=0,i=0;if(!c(t)||y(t)){for(let s=0;s<a;++s)e[r]=t[i],e[r+1]=t[i+1],r+=o,i+=n;return}const f=d(t);if(m(t))for(let s=0;s<a;++s)e[r]=Math.max(t[i]/f,-1),e[r+1]=Math.max(t[i+1]/f,-1),r+=o,i+=n;else for(let s=0;s<a;++s)e[r]=t[i]/f,e[r+1]=t[i+1]/f,r+=o,i+=n}function $(e,t,o,n){const a=e.typedBuffer,r=e.typedBufferStride,i=n?.count??e.count;let f=(n?.dstIndex??0)*r;for(let s=0;s<i;++s)a[f]=t,a[f+1]=o,f+=r}Object.freeze(Object.defineProperty({__proto__:null,fill:$,normalizeIntegerBuffer:l,normalizeIntegerBufferView:R},Symbol.toStringTag,{value:"Module"}));class U{constructor(t){this._streamDataRequester=t}async loadJSON(t,o){return this._load("json",t,o)}async loadBinary(t,o){return b(t)?(g(o),p(t)):this._load("binary",t,o)}async loadImage(t,o){return this._load("image",t,o)}async _load(t,o,n){if(this._streamDataRequester==null)return(await _(o,{responseType:k[t]})).data;const a=await h(this._streamDataRequester.request(o,t,n));if(a.ok===!0)return a.value;throw A(a.error),new w("glt-loader-request-error",`Request for resource failed: ${a.error}`)}}const k={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function x(e,t){switch(t){case u.TRIANGLES:return T(e);case u.TRIANGLE_STRIP:return j(e);case u.TRIANGLE_FAN:return q(e)}}function T(e){return typeof e=="number"?I(e):S(e)?new Uint16Array(e):e}function j(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const o=t-2,n=B(3*o);if(typeof e=="number"){let a=0;for(let r=0;r<o;r+=1)r%2==0?(n[a++]=r,n[a++]=r+1,n[a++]=r+2):(n[a++]=r+1,n[a++]=r,n[a++]=r+2)}else{let a=0;for(let r=0;r<o;r+=1)r%2==0?(n[a++]=e[r],n[a++]=e[r+1],n[a++]=e[r+2]):(n[a++]=e[r+1],n[a++]=e[r],n[a++]=e[r+2])}return n}function q(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const o=t-2,n=o<=65536?new Uint16Array(3*o):new Uint32Array(3*o);if(typeof e=="number"){let f=0;for(let s=0;s<o;++s)n[f++]=0,n[f++]=s+1,n[f++]=s+2;return n}const a=e[0];let r=e[1],i=0;for(let f=0;f<o;++f){const s=e[f+2];n[i++]=a,n[i++]=r,n[i++]=s,r=s}return n}export{l as a,R as b,$ as l,U as n,x as o};
