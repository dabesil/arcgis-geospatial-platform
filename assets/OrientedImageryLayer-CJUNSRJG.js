import{a0 as e,a1 as t,a2 as D,dv as B,eh as G,aT as $,T as z,aV as Y,fN as Q,hV as q,s as X,N as Z,n4 as ee,b0 as te,fS as ie}from"./index-B9tlkxep.js";import"./vendor-0HVaVRtn.js";let v=class extends B{set horizontalWKID(r){r?G({wkid:+r})?this._set("horizontalWKID",+r):this._set("horizontalWKID",r):this._set("horizontalWKID",null)}set verticalWKID(r){r?this._set("verticalWKID",isFinite(r)&&G({wkid:+r})?+r:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:r,focalLength:o,principalOffsetPoint:s,radialDistortionCoefficients:c,tangentialDistortionCoefficients:p}=this;return r?.length>1&&!Number.isNaN(o)&&s?.length>1&&c?.length>1&&p?.length>1}};e([t({json:{write:!0}})],v.prototype,"affineTransformations",void 0),e([t({json:{write:!0}})],v.prototype,"focalLength",void 0),e([t({json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),e([t({json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),e([t({json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),e([t({json:{write:!0}})],v.prototype,"horizontalWKID",null),e([t({json:{write:!0}})],v.prototype,"verticalWKID",null),e([t({json:{write:!0}})],v.prototype,"x",void 0),e([t({json:{write:!0}})],v.prototype,"y",void 0),e([t({json:{write:!0}})],v.prototype,"z",void 0),e([t({json:{write:!0}})],v.prototype,"type",void 0),v=e([D("esri.layers.orientedImagery.core.CameraOrientation")],v);const H=v;let m=class extends $.ClonableMixin(z.JSONSupportMixin(H)){constructor(){super(...arguments),this.type=1}toString(){const{type:r,horizontalWKID:o,verticalWKID:s,x:c,y:p,z:d,heading:u,pitch:f,roll:j,affineTransformations:P,focalLength:b,principalOffsetPoint:w,radialDistortionCoefficients:N,tangentialDistortionCoefficients:x}=this,l=[r,o,s,c,p,d,u,f,j];return this.isAdvanced&&(P?.forEach(n=>l.push(n)),l.push(b),w?.forEach(n=>l.push(n)),N?.forEach(n=>l.push(n)),x?.forEach(n=>l.push(n))),l.map(n=>Number.isNaN(n)?"":n).join("|")}};e([t({json:{write:!0}})],m.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],m.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],m.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],m.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],m.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"heading",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],m.prototype,"z",void 0),m=e([D("esri.layers.orientedImagery.core.CameraOrientationHPR")],m);const re=m;let I=class extends $.ClonableMixin(z.JSONSupportMixin(H)){constructor(){super(...arguments),this.type=4}toString(){const{type:r,latitude:o,longitude:s,ellipsoidRadius:c,squaredEccentricity:p,properties:d}=this,u=`${d}`.split("|");return u.splice(1,1),`${r}|${o}|${s}|${c}|${p}|${u.join("|")}`}};e([t({json:{write:!0}})],I.prototype,"type",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"latitude",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"longitude",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"ellipsoidRadius",void 0),e([t({json:{write:!0},type:Number})],I.prototype,"squaredEccentricity",void 0),e([t({json:{write:!0}})],I.prototype,"properties",void 0),I=e([D("esri.layers.orientedImagery.core.CameraOrientationLTP")],I);const oe=I;let h=class extends $.ClonableMixin(z.JSONSupportMixin(H)){constructor(){super(...arguments),this.type=2}toString(){const{type:r,horizontalWKID:o,verticalWKID:s,x:c,y:p,z:d,omega:u,phi:f,kappa:j,affineTransformations:P,focalLength:b,principalOffsetPoint:w,radialDistortionCoefficients:N,tangentialDistortionCoefficients:x}=this,l=[r,o,s,c,p,d,u,f,j];return this.isAdvanced&&(P?.forEach(n=>l.push(n)),l.push(b),w?.forEach(n=>l.push(n)),N?.forEach(n=>l.push(n)),x?.forEach(n=>l.push(n))),l.map(n=>isNaN(n)?"":n).join("|")}};e([t({json:{write:!0}})],h.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"omega",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"phi",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"kappa",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"z",void 0),h=e([D("esri.layers.orientedImagery.core.CameraOrientationOPK")],h);const ne=h;let g=class extends $.ClonableMixin(z.JSONSupportMixin(H)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:r,focalLength:o,principalOffsetPoint:s,radialDistortionCoefficients:c,tangentialDistortionCoefficients:p}=this;return r?.length>1||!Number.isNaN(o)||s?.length>1||c?.length>1||p?.length>1}toString(){const{type:r,horizontalWKID:o,verticalWKID:s,x:c,y:p,z:d,yaw:u,pitch:f,roll:j,affineTransformations:P,focalLength:b,principalOffsetPoint:w,radialDistortionCoefficients:N,tangentialDistortionCoefficients:x}=this,l=[r,o,s,c,p,d,u,f,j];return this.isAdvanced&&(P?.forEach(n=>l.push(n)),l.push(b),w?.forEach(n=>l.push(n)),w?.forEach(n=>l.push(n)),N?.forEach(n=>l.push(n)),x?.forEach(n=>l.push(n))),l.map(n=>Number.isNaN(n)?"":n).join("|")}};e([t({json:{write:!0}})],g.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"yaw",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"z",void 0),g=e([D("esri.layers.orientedImagery.core.CameraOrientationYPR")],g);const ae=g;var S;(function(i){i[i.HPR=1]="HPR",i[i.OPK=2]="OPK",i[i.YPR=3]="YPR",i[i.LTP=4]="LTP"})(S||(S={}));const M=new Map;M.set(`${S.OPK}`,{desc:"Using Omega Phi Kappa",constructor:ne}),M.set(`${S.HPR}`,{desc:"Using Heading, Pitch and Roll",constructor:re}),M.set(`${S.YPR}`,{desc:"Using Yaw, Pitch and Roll",constructor:ae}),M.set(`${S.LTP}`,{desc:"Using Local Tangent Plane",constructor:oe});let O=class extends $.ClonableMixin(z){constructor(){super(...arguments),this.url=null}};e([t({type:Number,json:{write:!0}})],O.prototype,"lod",void 0),e([t({type:String,json:{write:!0}})],O.prototype,"rasterFunction",void 0),e([t({type:String,json:{write:!0}})],O.prototype,"url",void 0),O=e([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],O);let U=class extends $.ClonableMixin(z){constructor(){super(...arguments),this.constantElevation=null}};e([t({type:Number,json:{write:!0}})],U.prototype,"constantElevation",void 0),U=e([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],U);const se=i=>i!=null&&typeof i.constantElevation=="number";function pe(i,r,o){return r&&(i=`${r}${i}`),o&&(i+=`${o}`),i}function ue(i,r,o){let{url:s}=i;return s?(s=pe(s,r,o),new O({...i,url:s})):null}function le(i,r,o){return i&&(se(i)?new U(i):ue(i,r,o))}const F=new Y({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),V=new Y({Feet:"feet",Meter:"meter"}),_=new Y({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique","":null}),W=new Map;function ye(i){const[r,o,s,c,p,d,u,f,j,P,b,w,N,x,l,n,T,C,E,K,R,L]=i.slice(1);return{horizontalWKID:r,verticalWKID:o,x:s,y:c,z:p,omega:d,phi:u,kappa:f,...k([j,P,b,w,N,x],[n,T],[C,E,K],[R,L],l)}}W.set(`${S.HPR}`,ce),W.set(`${S.YPR}`,de),W.set(`${S.OPK}`,ye),W.set(`${S.LTP}`,fe);const A=i=>{const r=i.map(o=>parseFloat(o)).filter(o=>!isNaN(o));if(r.length===i.length)return r};function k(i,r,o,s,c){const p=A(i),d=A(r),u=A(o),f=A(s);return{affineTransformations:p?.length===6?p:void 0,focalLength:p?.length===6?parseFloat(c):void 0,principalOffsetPoint:d?.length!==2?[0,0]:d,radialDistortionCoefficients:u?.length!==3?[0,0,0]:u,tangentialDistortionCoefficients:f?.length!==2?[0,0]:f}}function ce(i){const[r,o,s,c,p,d,u,f,j,P,b,w,N,x,l,n,T,C,E,K,R,L]=i.slice(1);return{horizontalWKID:r,verticalWKID:o,x:s,y:c,z:p,heading:d,pitch:u,roll:f,...k([j,P,b,w,N,x],[n,T],[C,E,K],[R,L],l)}}function de(i){const[r,o,s,c,p,d,u,f,j,P,b,w,N,x,l,n,T,C,E,K,R,L]=i.slice(1);return{horizontalWKID:r,verticalWKID:o,x:s,y:c,z:p,yaw:d,pitch:u,roll:f,...k([j,P,b,w,N,x],[n,T],[C,E,K],[R,L],l)}}function fe(i){const[r,o,s,c,p,...d]=i.slice(1),u=W.get(p),f=M.get(p)?.constructor;return!u||!f?null:{latitude:r,longitude:o,ellipsoidRadius:s,squaredEccentricity:c,properties:new f(u([p,"",...d]))}}function me(i){return Array.isArray(i)&&i?.length===9&&!i.some(isNaN)}const he=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),J=(i,r)=>!he.has(r)&&i,ge=(i,r,o)=>{const s=`orientedImageryProperties.${i}`;return{name:s,write:r?{ignoreOrigin:!0,target:s,writer:r}:{ignoreOrigin:!0},read:o?{ignoreOrigin:!0,source:s,reader:o}:{ignoreOrigin:!0}}};function ve(i){return i.json&&(i.json.origins=i.json.origins??{},i.json.origins["web-scene"]={write:!1,read:!1}),i}function y(i,r,o,s){const{name:c,write:p,read:d}=ge(i,r,o),u={name:c,write:p,read:d,origins:{service:{name:`orientedImageryInfo.${c}`,write:r,read:o},"web-scene":{name:c,write:J(p,i),read:J(d,i)},"web-map":{name:c,write:p,read:d}}};return s&&u.origins&&(u.type=s,u.origins["web-map"].type=s,u.origins["web-scene"].type=s),u}let a=class extends Q{constructor(){super(...arguments),this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:i,demPathPrefix:r,demPathSuffix:o}=this;return le(i,r,o)}async save(i){return this._debouncedSaveOperations(q.SAVE,i)}async saveAs(i,r){return this._debouncedSaveOperations(q.SAVE_AS,r,i)}findFirstValidLayerId(i){return i.layers?.find(r=>this.supportedSourceTypes.has(r.type))?.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new X("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([t({type:Number,json:y("cameraHeading")})],a.prototype,"cameraHeading",void 0),e([t({type:Number,json:y("cameraHeight")})],a.prototype,"cameraHeight",void 0),e([t({type:Number,json:y("cameraPitch")})],a.prototype,"cameraPitch",void 0),e([t({type:Number,json:y("cameraRoll")})],a.prototype,"cameraRoll",void 0),e([t({type:Number,json:y("coveragePercent")})],a.prototype,"coveragePercent",void 0),e([t({type:String,json:y("demPathPrefix")})],a.prototype,"demPathPrefix",void 0),e([t({type:String,json:y("demPathSuffix")})],a.prototype,"demPathSuffix",void 0),e([t({type:String,json:y("depthImagePathPrefix")})],a.prototype,"depthImagePathPrefix",void 0),e([t({type:String,json:y("depthImagePathSuffix")})],a.prototype,"depthImagePathSuffix",void 0),e([t({type:Object,json:y("elevationSource")})],a.prototype,"elevationSource",void 0),e([t({readOnly:!0})],a.prototype,"effectiveElevationSource",null),e([t({type:Number,json:y("farDistance")})],a.prototype,"farDistance",void 0),e([t()],a.prototype,"geometryType",void 0),e([t({type:Number,json:y("horizontalFieldOfView")})],a.prototype,"horizontalFieldOfView",void 0),e([t({type:String,json:y("horizontalMeasurementUnit")})],a.prototype,"horizontalMeasurementUnit",void 0),e([t({type:String,json:{...y("imageGeometryField"),default:"ImageGeometry"}})],a.prototype,"imageGeometryField",void 0),e([t({type:String,json:y("imagePathPrefix")})],a.prototype,"imagePathPrefix",void 0),e([t({type:String,json:y("imagePathSuffix")})],a.prototype,"imagePathSuffix",void 0),e([t({type:String,json:{...y("imageReferenceField"),default:"OIObjectID"}})],a.prototype,"imageReferenceField",void 0),e([t({type:Number,json:y("imageRotation")})],a.prototype,"imageRotation",void 0),e([t({type:Number,json:y("maximumDistance")})],a.prototype,"maximumDistance",void 0),e([t({type:Number,json:y("nearDistance")})],a.prototype,"nearDistance",void 0),e([t({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],a.prototype,"operationalLayerType",void 0),e([t({json:{...y("orientationAccuracy",(i,r,o)=>{ie(o,i.join(";"),r)},i=>{const r=i?.split(";")?.map(Number);return me(r)?r:[0,0,0,0,0,0,0,0,0]},String)}})],a.prototype,"orientationAccuracy",void 0),e([t({json:{...y("orientedImageryType",_.write,_.read,_.jsonValues.slice(1))}})],a.prototype,"orientedImageryType",void 0),e([t({json:{read:!1},value:"oriented-imagery",readOnly:!0})],a.prototype,"type",void 0),e([t({type:F.apiValues,json:{...y("timeIntervalUnit",F.write,F.read,F.jsonValues)}})],a.prototype,"timeIntervalUnit",void 0),e([t(ve(Z(ee)))],a.prototype,"useViewTime",void 0),e([t({type:Number,json:y("verticalFieldOfView")})],a.prototype,"verticalFieldOfView",void 0),e([t({type:V.apiValues,json:{...y("verticalMeasurementUnit",V.write,V.read,V.jsonValues)}})],a.prototype,"verticalMeasurementUnit",void 0),e([t({type:String,json:y("videoPathPrefix")})],a.prototype,"videoPathPrefix",void 0),e([t({type:String,json:y("videoPathSuffix")})],a.prototype,"videoPathSuffix",void 0),e([t({type:te,json:{origins:{"web-scene":{write:!1,read:!1}}}})],a.prototype,"visibilityTimeExtent",void 0),a=e([D("esri.layers.OrientedImageryLayer")],a);const Ie=a;export{Ie as default};
